webpackJsonp([25],{"33S9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),c=a.n(n),o=a("exGp"),i=a.n(o),s={data:function(){return{options:[],defaultProps:{children:"children",label:"accountTitleName"},cprops:{checkStrictly:!0,label:"accountTitleName",value:"accountTitleId",children:"children"},data:[],dialogVisible:!1,changedialogVisible:!1,form:{accountTitleId:"",accountTitleName:"",accountTitleCode:""},changeform:{accountTitleId:"",accountTitleName:"",accountTitleCode:""}}},created:function(){this.getAccountingItemList()},methods:{addUser:function(){var t=this;return i()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("hbte-financial/hbte/accountTitle/saveAccountTitle",t.form);case 2:a=e.sent,a.data,t.dialogVisible=!1,t.$message.success("添加成功"),t.getAccountingItemList();case 7:case"end":return e.stop()}},e,t)}))()},changeaddUser:function(){var t=this;return i()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("hbte-financial/hbte/accountTitle/updateAccountTitle",t.changeform);case 2:a=e.sent,a.data,t.$message.success("修改成功"),t.changedialogVisible=!1,t.getAccountingItemList();case 7:case"end":return e.stop()}},e,t)}))()},handleChange:function(t){this.form.accountTitleId=t[t.length-1]||-1},append:function(t){this.changedialogVisible=!0,this.changeform.accountTitleId=t.accountTitleId,this.changeform.accountTitleName=t.accountTitleName,this.changeform.accountTitleCode=t.accountTitleCode},getAccountingItemList:function(){var t=this;return i()(c.a.mark(function e(){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("hbte-financial/hbte/accountTitle/accountTitleList");case 2:a=e.sent,n=a.data,t.data=n.data,t.options=n.data;case 6:case"end":return e.stop()}},e,t)}))()},remove:function(t,e){var a=this;return i()(c.a.mark(function n(){var o,i,s,l,r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.$confirm("确认要删除么?(若删除父级目录则子目录内容全部删除)","温馨提示",{type:"warning"});case 3:return n.next=5,a.$axios.post("hbte-financial/hbte/accountTitle/delAccountTitle",{accountTitleId:e.accountTitleId});case 5:o=n.sent,0===(i=o.aa).code?a.$message.success(i.msg):a.$message.error(i.msg),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(0);case 12:a.getAccountingItemList(),s=t.parent,l=s.data.children||s.data,r=l.findIndex(function(t){return t.id===e.id}),l.splice(r,1);case 17:case"end":return n.stop()}},n,a,[[0,10]])}))()},renderContent:function(t,e){var a=this,n=e.node,c=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[n.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.append(c)}}},["Append"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.remove(n,c)}}},["Delete"])])])}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AccountingItem"},[a("el-button",{staticClass:"addBtn",staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加")]),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-tree",{attrs:{data:t.data,"show-checkbox":"","node-key":"id",props:t.defaultProps,"expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,c=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"el-icon-notebook-2"},[t._v("  "+t._s(c.accountTitleCode)+"-"+t._s(n.label))]),t._v(" "),a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.append(c)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(n,c)}}},[t._v("删除")])],1)])}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"会计科目管理",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"会计科目"}},[a("el-cascader",{attrs:{options:t.options,props:t.cprops,clearable:"",placeholder:"请选择(默认为一级分类)"},on:{change:t.handleChange},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.data.accountTitleCode)+"-"+t._s(e.data.accountTitleName))])]}}])})],1),t._v(" "),a("el-form-item",{attrs:{label:"科目名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入会计科目名称"},model:{value:t.form.accountTitleName,callback:function(e){t.$set(t.form,"accountTitleName",e)},expression:"form.accountTitleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"科目编码",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入会计科目编码"},model:{value:t.form.accountTitleCode,callback:function(e){t.$set(t.form,"accountTitleCode",e)},expression:"form.accountTitleCode"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.changedialogVisible,width:"40%"},on:{"update:visible":function(e){t.changedialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.changeform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"科目名称"}},[a("el-input",{model:{value:t.changeform.accountTitleName,callback:function(e){t.$set(t.changeform,"accountTitleName",e)},expression:"changeform.accountTitleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"科目编码"}},[a("el-input",{model:{value:t.changeform.accountTitleCode,callback:function(e){t.$set(t.changeform,"accountTitleCode",e)},expression:"changeform.accountTitleCode"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.changedialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.changeaddUser}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(t){a("aFIa")},null,null);e.default=r.exports},aFIa:function(t,e){}});
//# sourceMappingURL=25.2c7a71e6d4dea76a6e97.js.map