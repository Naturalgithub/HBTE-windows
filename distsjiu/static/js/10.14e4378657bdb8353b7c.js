webpackJsonp([10],{QVCS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),o=r.n(a),i=r("exGp"),l=r.n(i),s={data:function(){return{checkedCities:[],roleForm:{roloId:""},datademo:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],defaultProps:{children:"children",label:"label"},total:0,page:1,pageSize:50,data:[],defaultPropss:{children:"appInfos",label:"appName"},AdddialogVisible:!1,EditdialogVisible:!1,GetpowerdialogVisible:!1,currentPage4:4,value:!0,Addform:{roleDescribe:"",roleName:""},Editform:{roleName:"",roleDescribe:""},tableData:[{juename:"超级管理员",power:"信息高速公路,工时系统,财务系统"},{juename:"普通用户",power:"信息高速公路"}]}},created:function(){this.getJueseList(),this.gettreeList()},methods:{getchange:function(){console.log(this.checkedCities)},surerole:function(){var e=this;return l()(o.a.mark(function t(){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.GetpowerdialogVisible=!1,console.log(e.roleForm.roleId),t.next=4,e.$axios.post("hbte-dingding/role/updateRole",{roleId:e.roleForm.roleId,appInfoIds:e.checkedCities});case 4:r=t.sent,a=r.data,console.log(a),0==a.code?e.$message.success("授权成功!"):e.$message.error(a.error),e.getJueseList();case 9:case"end":return t.stop()}},t,e)}))()},gettreeList:function(){var e=this;return l()(o.a.mark(function t(){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios("hbte-dingding/app/list");case 2:r=t.sent,a=r.data,e.datademo=a.result.appInfos,console.log(a.result);case 6:case"end":return t.stop()}},t,e)}))()},getJueseList:function(){var e=this;return l()(o.a.mark(function t(){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios("hbte-dingding/role/list",{params:{page:e.page,pageSize:e.pageSize}});case 2:r=t.sent,a=r.data,e.tableData=a.result.roles,e.total=a.count;case 6:case"end":return t.stop()}},t,e)}))()},AddUser:function(){this.AdddialogVisible=!0},sureadd:function(){var e=this;return l()(o.a.mark(function t(){var r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-dingding/role/addRole",e.Addform);case 2:r=t.sent,a=r.data,console.log(a),0==a.code?e.$message.success("添加成功"):e.$message.error("添加失败"),e.getJueseList(),e.AdddialogVisible=!1;case 8:case"end":return t.stop()}},t,e)}))()},editthis:function(e){this.EditdialogVisible=!0,console.log(e.row),this.Editform.roleName=e.row.roleName,this.Editform.roleDescribe=e.row.roleDescribe,this.Editform.roleId=e.row.roleId},sureedit:function(){var e=this;return l()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-dingding/role/updateRole",e.Editform);case 2:r=t.sent,0==r.data.code?e.$message.success("修改成功"):e.$message.error("修改失败"),e.getJueseList(),e.EditdialogVisible=!1;case 7:case"end":return t.stop()}},t,e)}))()},delrole:function(e){var t=this;return l()(o.a.mark(function r(){var a,i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$confirm("亲, 你确认要删除么?","温馨提示",{type:"warning"});case 3:return a=e.row.roleId,r.next=6,t.$axios.post("hbte-dingding/role/delete",{roleId:a});case 6:i=r.sent,i.data.code,t.$message({type:"success",message:"删除成功!"}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:t.getJueseList();case 15:case"end":return r.stop()}},r,t,[[0,11]])}))()},getpower:function(e){var t=this;return l()(o.a.mark(function r(){var a,i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.checkedCities="",t.GetpowerdialogVisible=!0,t.roleForm.roloId=e.row.roleId,console.log(e.row.roleId),r.next=6,t.$axios("hbte-dingding/role/getRole",{params:{roleId:e.row.roleId}});case 6:a=r.sent,i=a.data,t.roleForm.roleId=e.row.roleId,void 0==i.result.role.appInfoIds||(t.checkedCities=i.result.role.appInfoIds);case 10:case"end":return r.stop()}},r,t)}))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getJueseList()},handleCurrentChange:function(e){this.page=e,this.getJueseList()}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"addArticle"},[r("el-button",{staticClass:"four-btn",attrs:{type:"success"},on:{click:e.AddUser}},[e._v("添加角色")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleDescribe",label:"角色描述"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{staticStyle:{"mragin-left":"10px","margin-right":"10"},attrs:{type:"primary"},on:{click:function(r){return e.editthis(t)}}},[e._v("编辑")]),e._v("  | \n        "),r("el-link",{staticStyle:{"mragin-left":"10px","margin-right":"10"},attrs:{type:"primary"},on:{click:function(r){return e.getpower(t)}}},[e._v("应用授权")]),e._v("  | \n        "),r("el-link",{staticStyle:{"mragin-left":"10px","margin-right":"10"},attrs:{type:"danger"},on:{click:function(r){return e.delrole(t)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("el-dialog",{attrs:{title:"新增角色",visible:e.AdddialogVisible,width:"30%"},on:{"update:visible":function(t){e.AdddialogVisible=t}}},[r("el-form",{attrs:{model:e.Addform,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称"}},[r("el-input",{attrs:{placeholder:"请输入角色名字"},model:{value:e.Addform.roleName,callback:function(t){e.$set(e.Addform,"roleName",t)},expression:"Addform.roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色描述"}},[r("el-input",{model:{value:e.Addform.roleDescribe,callback:function(t){e.$set(e.Addform,"roleDescribe",t)},expression:"Addform.roleDescribe"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.AdddialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.sureadd}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.EditdialogVisible,width:"30%"},on:{"update:visible":function(t){e.EditdialogVisible=t}}},[r("el-form",{attrs:{model:e.Editform,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称"}},[r("el-input",{attrs:{placeholder:"请输入角色名字"},model:{value:e.Editform.roleName,callback:function(t){e.$set(e.Editform,"roleName",t)},expression:"Editform.roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色描述"}},[r("el-input",{model:{value:e.Editform.roleDescribe,callback:function(t){e.$set(e.Editform,"roleDescribe",t)},expression:"Editform.roleDescribe"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.EditdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.sureedit}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"角色授权",visible:e.GetpowerdialogVisible,width:"30%"},on:{"update:visible":function(t){e.GetpowerdialogVisible=t}}},[r("div",[r("el-checkbox-group",{on:{change:e.getchange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.datademo,function(t){return r("el-checkbox",{key:t.appInfoId,staticStyle:{width:"25%"},attrs:{label:t.appInfoId}},[e._v(e._s(t.appName))])}),1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.GetpowerdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.surerole}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=r("VU/8")(s,n,!1,function(e){r("R7tZ")},"data-v-5d332e14",null);t.default=d.exports},R7tZ:function(e,t){}});
//# sourceMappingURL=10.14e4378657bdb8353b7c.js.map